# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ BookReader AI

**–î–∞—Ç–∞:** 23 –¥–µ–∫–∞–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è:** 1.2 (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ 77.246.106.109)
**–ê–Ω–∞–ª–∏—Ç–∏–∫:** Claude Opus 4.5

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–†–µ–∑—é–º–µ –∞–Ω–∞–ª–∏–∑–∞](#1-—Ä–µ–∑—é–º–µ-–∞–Ω–∞–ª–∏–∑–∞)
2. [–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã](#2-–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã)
3. [–ü—Ä–æ–±–ª–µ–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#3-–ø—Ä–æ–±–ª–µ–º—ã-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
4. [–ü—Ä–æ–±–ª–µ–º—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è](#4-–ø—Ä–æ–±–ª–µ–º—ã-–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)
5. [–ü—Ä–æ–±–ª–µ–º—ã —Ç–∏–ø–∏–∑–∞—Ü–∏–∏](#5-–ø—Ä–æ–±–ª–µ–º—ã-—Ç–∏–ø–∏–∑–∞—Ü–∏–∏)
6. [–ü—Ä–æ–±–ª–µ–º—ã React –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤](#6-–ø—Ä–æ–±–ª–µ–º—ã-react-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤)
7. [–ü—Ä–æ–±–ª–µ–º—ã Backend](#7-–ø—Ä–æ–±–ª–µ–º—ã-backend)
8. [–ü—Ä–æ–±–ª–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#8-–ø—Ä–æ–±–ª–µ–º—ã-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö) ‚ö†Ô∏è **NEW**
9. [–ü—Ä–æ–±–ª–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#9-–ø—Ä–æ–±–ª–µ–º—ã-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
10. [–ü–ª–∞–Ω –¥–æ—Ä–∞–±–æ—Ç–æ–∫](#10-–ø–ª–∞–Ω-–¥–æ—Ä–∞–±–æ—Ç–æ–∫)
11. [–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#11-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

---

## 1. –†–µ–∑—é–º–µ –∞–Ω–∞–ª–∏–∑–∞

### –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|------------|--------|-------------|
| Backend Types | mypy | ‚úÖ PASS | - |
| Backend Linting | ruff | ‚ö†Ô∏è 50 issues | Medium |
| Frontend Types | TypeScript | ‚ùå 34+ errors | High |
| Frontend Linting | ESLint | ‚ö†Ô∏è 6 issues | Low |
| Backend Tests | pytest | ‚ùå 29 collection errors | Critical |
| Frontend Tests | vitest | ‚ùå 7 failed suites | Critical |
| Auth Cache | Manual | ‚ùå Not invalidated | Critical |
| **Database** | **Production** | **‚úÖ All migrations applied** | **OK** |
| **DB Schema** | **Production** | **‚ö†Ô∏è Missing CASCADE DELETE** | **High** |

### –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Ö–æ–¥–∫–∏

1. **‚úÖ –ë–î —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞** - –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–∞ production (–≤–µ—Ä—Å–∏—è `add_is_processing_20251220`)
2. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –∫–µ—à–µ–º –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** - –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—Å–ª–µ re-login
3. **‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç CASCADE DELETE** - 5 FK –±–µ–∑ –∫–∞—Å–∫–∞–¥–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
4. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ state management** - TanStack Query + Zustand stores –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—Ç
5. **–ú–∞—Å—Å–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `eslint-disable`** - 35+ –¥–∏—Ä–µ–∫—Ç–∏–≤ —Å–∫—Ä—ã–≤–∞—é—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏
6. **Orphan NLP —Ç–µ—Å—Ç—ã** - 30+ —Ñ–∞–π–ª–æ–≤ —Ç–µ—Å—Ç–æ–≤ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π –∫–æ–¥
7. **React Hooks violations** - `useQueryClient()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `queryFn`

---

## 2. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 2.1 Stale Cache –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–°–∏–º–ø—Ç–æ–º:** –ü–æ—Å–ª–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å—Ç–∞—Ä—ã–µ –∫–Ω–∏–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –≤ –∫–µ—à–µ.

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         –ö–ï–®–ò –ù–ï –û–ß–ò–©–ê–Æ–¢–°–Ø                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  logout() –Ω–µ     ‚îÇ TanStack Query    ‚îÇ IndexedDB —Ö—Ä–∞–Ω–∏—Ç        ‚îÇ
‚îÇ  –æ—á–∏—â–∞–µ—Ç –∫–µ—à–∏    ‚îÇ cache –æ—Å—Ç–∞—ë—Ç—Å—è    ‚îÇ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ userId       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã:**
- `frontend/src/stores/auth.ts:80-97` - logout –±–µ–∑ –æ—á–∏—Å—Ç–∫–∏
- `frontend/src/App.tsx:57-65` - queryClient –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- `frontend/src/services/chapterCache.ts` - –Ω–µ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ userId
- `frontend/src/services/imageCache.ts` - –Ω–µ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ userId

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ CRITICAL

---

### 2.2 React Hook Violation

**–§–∞–π–ª:** `frontend/src/hooks/api/useDescriptions.ts:181`

```typescript
// ‚ùå VIOLATION: Hook called inside queryFn (not a React component/hook)
queryFn: async () => {
  const queryClient = useQueryClient(); // This breaks Rules of Hooks!
  // ...
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –≤–æ–∑–º–æ–∂–Ω—ã–µ runtime crashes.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ CRITICAL

---

### 2.3 Orphan NLP Tests

–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è Multi-NLP —Å–∏—Å—Ç–µ–º—ã (December 2025) –æ—Å—Ç–∞–ª–∏—Å—å —Ç–µ—Å—Ç—ã, –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—â–∏–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏:

```
ModuleNotFoundError: No module named 'app.services.nlp'
```

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã (30+):**
- `tests/services/nlp/` - –≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
- `tests/services/test_gliner_processor.py`
- `tests/services/test_natasha_processor.py`
- `tests/services/test_spacy_processor.py`
- `tests/services/test_stanza_processor.py`
- `tests/test_multi_nlp_manager.py`
- `tests/test_celery_tasks.py` (NLP tasks)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ CRITICAL (–±–ª–æ–∫–∏—Ä—É–µ—Ç CI/CD)

---

### 2.4 Missing Test Dependency

**–û—à–∏–±–∫–∞:**
```
Failed to resolve import "fake-indexeddb/auto" from "src/test/setup.ts"
```

**–†–µ—à–µ–Ω–∏–µ:** `npm install -D fake-indexeddb`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ CRITICAL (–±–ª–æ–∫–∏—Ä—É–µ—Ç frontend tests)

---

## 3. –ü—Ä–æ–±–ª–µ–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 3.1 –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ State Management

**–ü—Ä–æ–±–ª–µ–º–∞:** TanStack Query –∏ Zustand stores —É–ø—Ä–∞–≤–ª—è—é—Ç –æ–¥–Ω–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

| –î–∞–Ω–Ω—ã–µ | TanStack Query | Zustand Store | –ö–æ–Ω—Ñ–ª–∏–∫—Ç |
|--------|----------------|---------------|----------|
| Books list | `useBooks()` | `useBooksStore.books` | ‚úÖ –î–∞ |
| Current book | `useBook()` | `useBooksStore.currentBook` | ‚úÖ –î–∞ |
| Reading progress | - | `useReaderStore.readingProgress` | ‚ö†Ô∏è Partial |

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –†–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –î–≤–æ–π–Ω—ã–µ API –∑–∞–ø—Ä–æ—Å—ã
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ TanStack Query –¥–ª—è server state, Zustand —Ç–æ–ª—å–∫–æ –¥–ª—è client state (UI preferences).

---

### 3.2 Reader Store –±–µ–∑ User Isolation

**–§–∞–π–ª:** `frontend/src/stores/reader.ts`

```typescript
persist(
  (set, get) => ({
    readingProgress: {},  // ‚ùå –ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ userId
    bookmarks: {},        // ‚ùå –ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ userId
    highlights: {},       // ‚ùå –ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ userId
  }),
  {
    name: 'reader-storage',  // –ï–¥–∏–Ω—ã–π –∫–ª—é—á –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!
  }
)
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** Bookmarks –∏ highlights –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–∏–¥–Ω—ã –¥—Ä—É–≥–æ–º—É.

---

### 3.3 QueryClient –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è

**–§–∞–π–ª:** `frontend/src/App.tsx:57-65`

```typescript
// QueryClient —Å–æ–∑–¥–∞–Ω –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è, –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è
const queryClient = new QueryClient({...});
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –∏–∑ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π (auth.ts).

---

## 4. –ü—Ä–æ–±–ª–µ–º—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### 4.1 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–∏ logout

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ `logout()`:**
```typescript
// frontend/src/stores/auth.ts:80-97
logout: () => {
  authAPI.logout().catch(console.error);

  // ‚úÖ –û—á–∏—â–∞–µ—Ç—Å—è
  localStorage.removeItem(STORAGE_KEYS.AUTH_TOKEN);
  localStorage.removeItem(STORAGE_KEYS.REFRESH_TOKEN);
  localStorage.removeItem(STORAGE_KEYS.USER_DATA);

  // ‚ùå –ù–ï –æ—á–∏—â–∞–µ—Ç—Å—è
  // - TanStack Query cache (in-memory)
  // - IndexedDB chapterCache
  // - IndexedDB imageCache
  // - Zustand reader store (bookmarks, highlights)
}
```

### 4.2 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–∏ login

```typescript
// frontend/src/stores/auth.ts:21-48
login: async (email, password) => {
  // ‚ùå –ù–µ—Ç –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ü–ï–†–ï–î –ª–æ–≥–∏–Ω–æ–º
  const response = await authAPI.login({ email, password });
  // –°—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
}
```

### 4.3 IndexedDB –±–µ–∑ userId

| –°–µ—Ä–≤–∏—Å | –¢–µ–∫—É—â–∏–π –∫–ª—é—á | –ü—Ä–æ–±–ª–µ–º–∞ |
|--------|--------------|----------|
| chapterCache | `${bookId}_${chapterNumber}` | –ù–µ—Ç userId |
| imageCache | `${bookId}_${descriptionId}` | –ù–µ—Ç userId |

---

## 5. –ü—Ä–æ–±–ª–µ–º—ã —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

### 5.1 –ú–∞—Å—Å–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `@typescript-eslint/no-explicit-any`

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:** 15+ —Ñ–∞–π–ª–æ–≤ —Å –æ—Ç–∫–ª—é—á—ë–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–æ–º

**–§–∞–π–ª—ã —Å `/* eslint-disable @typescript-eslint/no-explicit-any */`:**
- `hooks/epub/useContentHooks.ts`
- `hooks/epub/useCFITracking.ts`
- `hooks/epub/useLocationGeneration.ts`
- `hooks/epub/useImageModal.ts`
- `hooks/epub/useChapterManagement.ts`
- `hooks/epub/useDescriptionHighlighting.ts`
- `hooks/epub/useEpubLoader.ts`
- `hooks/reader/useAutoParser.ts`
- `pages/LoginPage.tsx`
- `pages/AdminDashboardEnhanced.tsx`
- `stores/images.ts`
- –ò –¥—Ä—É–≥–∏–µ...

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å proper types –¥–ª—è epub.js –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–±—Ä–∞—Ç—å `any`.

### 5.2 TypeScript –æ—à–∏–±–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:** 34+ –æ—à–∏–±–æ–∫

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ–ø–æ–ª–Ω—ã–µ mock types –¥–ª—è `epub.js` (Book, Rendition, EpubLocations)
- `ChapterInfo` missing `book_id` property
- `Description` missing `cfi_range` property

---

## 6. –ü—Ä–æ–±–ª–µ–º—ã React –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

### 6.1 –û—Ç–∫–ª—é—á–µ–Ω–∏–µ exhaustive-deps

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:** 12+ —Ñ–∞–π–ª–æ–≤ —Å `/* eslint-disable react-hooks/exhaustive-deps */`

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `components/Reader/EpubReader.tsx` - –ø–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
- `components/UI/ParsingOverlay.tsx` - –ø–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
- `hooks/useReadingSession.ts` - –ø–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
- `services/websocket.tsx` - –ø–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ

**–†–∏—Å–∫–∏:**
- Stale closures
- Infinite loops
- Missing re-renders
- Memory leaks

### 6.2 useCallback/useMemo –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ü—Ä–∏–º–µ—Ä –∏–∑ `useChapterNavigation.ts:78`:**
```typescript
// eslint-disable-line react-hooks/exhaustive-deps
}, [currentPage, currentChapter, setCurrentPage, setCurrentChapter]);
```

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∫–∞–∑–∞–Ω—ã, –Ω–æ –ø—Ä–∞–≤–∏–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ - –≤–æ–∑–º–æ–∂–Ω–æ –µ—Å—Ç—å —Å–∫—Ä—ã—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã.

---

## 7. –ü—Ä–æ–±–ª–µ–º—ã Backend

### 7.1 Ruff Linting Issues

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:** 50 –æ—à–∏–±–æ–∫

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|------------|----------|
| F401 | ~33 | Unused imports |
| E402 | ~12 | Module level import not at top |
| F811 | ~3 | Redefinition of unused name |
| E712 | ~1 | Comparison to True |

**Auto-fixable:** 33 –∏–∑ 50

### 7.2 Pydantic V1 Deprecations

```python
# Deprecated:
@validator("field")          # ‚Üí @field_validator
min_items=1                  # ‚Üí min_length=1
json_encoders={...}          # ‚Üí model_serializer
class Config:                # ‚Üí model_config = ConfigDict(...)
```

### 7.3 FastAPI Deprecations

```python
# Deprecated:
@app.on_event("startup")     # ‚Üí lifespan context manager
@app.on_event("shutdown")    # ‚Üí lifespan context manager
```

### 7.4 NLP Configuration Remains

**–§–∞–π–ª:** `backend/app/core/config.py:69-78`

```python
# NLP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (DEPRECATED - NLP removed December 2025)
SPACY_MODEL: str = "ru_core_news_lg"
NLTK_DATA_PATH: str = "./nltk_data"
MULTI_NLP_MODE: str = Field(default="ensemble", ...)
```

–≠—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã.

---

## 8. –ü—Ä–æ–±–ª–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≤–µ–¥—ë–Ω –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ **77.246.106.109**
> –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `bookreader_dev`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `postgres`

### 8.1 ‚úÖ –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π (OK)

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –≤ –ë–î:** `add_is_processing_20251220` (–ø–æ—Å–ª–µ–¥–Ω—è—è)

```
alembic_version: add_is_processing_20251220 ‚úÖ LATEST
```

**–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç:**
- `users`, `books`, `chapters`, `descriptions` ‚úÖ
- `generated_images`, `reading_progress`, `reading_sessions` ‚úÖ
- `reading_goals`, `feature_flags`, `subscriptions` ‚úÖ

---

### 8.2 ‚úÖ –¢–∞–±–ª–∏—Ü–∞ descriptions EXISTS

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|-----------|--------|
| –ú–æ–¥–µ–ª—å `Description` | ‚úÖ –°—É—â–µ—Å—Ç–≤—É–µ—Ç (`app/models/description.py`) |
| –¢–∞–±–ª–∏—Ü–∞ `descriptions` | ‚úÖ –°—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î |
| FK `descriptions_chapter_id_fkey` | ‚úÖ ON DELETE CASCADE |

---

### 8.3 ‚úÖ –ö–æ–ª–æ–Ω–∫–∞ books.is_processing EXISTS

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|-----------|--------|
| –ú–æ–¥–µ–ª—å `Book.is_processing` | ‚úÖ –û–±—ä—è–≤–ª–µ–Ω–∞ –≤ –º–æ–¥–µ–ª–∏ |
| –ö–æ–ª–æ–Ω–∫–∞ –≤ –ë–î | ‚úÖ `is_processing boolean NOT NULL DEFAULT false` |

---

### 8.4 ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ CASCADE DELETE

**FK –ë–ï–ó ON DELETE CASCADE (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –Ω–∞ production):**

| –¢–∞–±–ª–∏—Ü–∞ | FK | –¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|----|-------------------|--------------|
| `books` | `user_id ‚Üí users.id` | NO ACTION | ADD CASCADE |
| `chapters` | `book_id ‚Üí books.id` | NO ACTION | ADD CASCADE |
| `reading_progress` | `book_id ‚Üí books.id` | NO ACTION | ADD CASCADE |
| `reading_progress` | `user_id ‚Üí users.id` | NO ACTION | ADD CASCADE |
| `generated_images` | `user_id ‚Üí users.id` | NO ACTION | ADD CASCADE |

**FK –° CASCADE (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ):**

| –¢–∞–±–ª–∏—Ü–∞ | FK | –ü–æ–≤–µ–¥–µ–Ω–∏–µ |
|---------|----|-----------|
| `reading_sessions` | `book_id ‚Üí books.id` | ‚úÖ ON DELETE CASCADE |
| `descriptions` | `chapter_id ‚Üí chapters.id` | ‚úÖ ON DELETE CASCADE |
| `generated_images` | `description_id ‚Üí descriptions.id` | ‚úÖ ON DELETE CASCADE |
| `generated_images` | `chapter_id ‚Üí chapters.id` | ‚úÖ ON DELETE CASCADE |

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è CASCADE:**
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Å—Ç–∞–≤–∏—Ç orphan –∑–∞–ø–∏—Å–∏ –≤ books, reading_progress, generated_images
- –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ –æ—Å—Ç–∞–≤–∏—Ç orphan chapters –∏ progress
- –ù–∞—Ä—É—à–µ–Ω–∏–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö

**–ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```python
# alembic revision -m "add_cascade_delete_constraints"
def upgrade():
    # Drop old constraints
    op.drop_constraint('books_user_id_fkey', 'books', type_='foreignkey')
    op.drop_constraint('chapters_book_id_fkey', 'chapters', type_='foreignkey')
    op.drop_constraint('reading_progress_book_id_fkey', 'reading_progress', type_='foreignkey')
    op.drop_constraint('reading_progress_user_id_fkey', 'reading_progress', type_='foreignkey')
    op.drop_constraint('generated_images_user_id_fkey', 'generated_images', type_='foreignkey')

    # Recreate with CASCADE
    op.create_foreign_key('books_user_id_fkey', 'books', 'users', ['user_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('chapters_book_id_fkey', 'chapters', 'books', ['book_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('reading_progress_book_id_fkey', 'reading_progress', 'books', ['book_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('reading_progress_user_id_fkey', 'reading_progress', 'users', ['user_id'], ['id'], ondelete='CASCADE')
    op.create_foreign_key('generated_images_user_id_fkey', 'generated_images', 'users', ['user_id'], ['id'], ondelete='CASCADE')
```

---

### 8.5 –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ Feature Flags

**–¢–∞–±–ª–∏—Ü–∞ feature_flags –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å NLP —Ñ–ª–∞–≥–∏:**

| Flag | Status | –ü—Ä–æ–±–ª–µ–º–∞ |
|------|--------|----------|
| `USE_NEW_NLP_ARCHITECTURE` | enabled | NLP —É–¥–∞–ª—ë–Ω |
| `ENABLE_ENSEMBLE_VOTING` | enabled | NLP —É–¥–∞–ª—ë–Ω |
| `ENABLE_PARALLEL_PROCESSING` | enabled | NLP —É–¥–∞–ª—ë–Ω |
| `USE_LLM_ENRICHMENT` | disabled | NLP —É–¥–∞–ª—ë–Ω |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å NLP-related —Ñ–ª–∞–≥–∏.

---

### 8.6 Enum Types: –ú–æ–¥–µ–ª—å vs –ë–î

| Enum | –í –º–æ–¥–µ–ª–∏ | –í –ë–î | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ |
|------|----------|------|--------------|
| `SubscriptionPlan` | Python Enum | PostgreSQL ENUM | ‚úÖ OK |
| `SubscriptionStatus` | Python Enum | PostgreSQL ENUM | ‚úÖ OK |
| `DescriptionType` | Python Enum | PostgreSQL ENUM `descriptiontype` | ‚úÖ OK |
| `ImageService` | Python Enum ‚Üí String | CHECK constraint | ‚úÖ OK |
| `ImageStatus` | Python Enum ‚Üí String | CHECK constraint | ‚úÖ OK |
| `BookFormat` | Python Enum ‚Üí String | CHECK constraint | ‚úÖ OK |
| `BookGenre` | Python Enum ‚Üí String | CHECK constraint | ‚úÖ OK |

---

## 9. –ü—Ä–æ–±–ª–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 8.1 Backend Tests

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| Collection errors | 29 |
| Warnings | 42 |
| Passed | N/A (blocked) |

**–ü—Ä–∏—á–∏–Ω—ã:**
- Orphan NLP test files
- Missing NLP modules
- Unregistered pytest marks

### 8.2 Frontend Tests

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| Failed suites | 7 |
| Root cause | Missing fake-indexeddb |

### 8.3 Docker Obsolete Volumes

```yaml
# docker-compose.yml - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è NLP
volumes:
  nlp_nltk_data:        # ‚ùå –£–¥–∞–ª–∏—Ç—å
  nlp_stanza_models:    # ‚ùå –£–¥–∞–ª–∏—Ç—å
  nlp_huggingface_cache: # ‚ùå –£–¥–∞–ª–∏—Ç—å
```

---

## 9. –ü–ª–∞–Ω –¥–æ—Ä–∞–±–æ—Ç–æ–∫

### –§–∞–∑–∞ 0: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û - –ë–î —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

> **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ 77.246.106.109**
> - –í–µ—Ä—Å–∏—è alembic: `add_is_processing_20251220` (–ø–æ—Å–ª–µ–¥–Ω—è—è)
> - –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
> - –í—Å–µ –∫–æ–ª–æ–Ω–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –º–æ–¥–µ–ª—è–º

---

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

| # | –ó–∞–¥–∞—á–∞ | –§–∞–π–ª—ã | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—Ä–µ–º—è |
|---|--------|-------|-----------|-------|
| 1.1 | –°–æ–∑–¥–∞—Ç—å `lib/queryClient.ts` —Å —ç–∫—Å–ø–æ—Ä—Ç–æ–º | –ù–æ–≤—ã–π —Ñ–∞–π–ª | Low | 30 –º–∏–Ω |
| 1.2 | –°–æ–∑–¥–∞—Ç—å `utils/cacheManager.ts` | –ù–æ–≤—ã–π —Ñ–∞–π–ª | Low | 1 —á–∞—Å |
| 1.3 | –û–±–Ω–æ–≤–∏—Ç—å `logout()` —Å –æ—á–∏—Å—Ç–∫–æ–π –∫–µ—à–µ–π | `stores/auth.ts` | Medium | 1 —á–∞—Å |
| 1.4 | –û–±–Ω–æ–≤–∏—Ç—å `login()` —Å –æ—á–∏—Å—Ç–∫–æ–π –∫–µ—à–µ–π | `stores/auth.ts` | Medium | 1 —á–∞—Å |
| 1.5 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å React Hook violation | `hooks/api/useDescriptions.ts` | Low | 30 –º–∏–Ω |
| 1.6 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å fake-indexeddb | `package.json` | Low | 5 –º–∏–Ω |
| 1.7 | –£–¥–∞–ª–∏—Ç—å orphan NLP —Ç–µ—Å—Ç—ã | `tests/services/nlp/` | Low | 30 –º–∏–Ω |

**–ò—Ç–æ–≥–æ –§–∞–∑–∞ 1:** ~5 —á–∞—Å–æ–≤

### –§–∞–∑–∞ 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è (1-2 –¥–Ω—è)

| # | –ó–∞–¥–∞—á–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|--------|----------|
| 2.1 | –î–æ–±–∞–≤–∏—Ç—å userId –≤ query keys | `hooks/api/queryKeys.ts` |
| 2.2 | –î–æ–±–∞–≤–∏—Ç—å userId –≤ IndexedDB –∫–ª—é—á–∏ | `services/chapterCache.ts`, `imageCache.ts` |
| 2.3 | –î–æ–±–∞–≤–∏—Ç—å user-scoped persistence –≤ reader store | `stores/reader.ts` |
| 2.4 | –°–æ–∑–¥–∞—Ç—å watcher –¥–ª—è —Å–º–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `stores/auth.ts` |
| 2.5 | –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π books state –∏–∑ Zustand | `stores/books.ts` |

### –§–∞–∑–∞ 3: TypeScript improvements (2-3 –¥–Ω—è)

| # | –ó–∞–¥–∞—á–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|--------|----------|
| 3.1 | –°–æ–∑–¥–∞—Ç—å proper types –¥–ª—è epub.js | `types/epub.d.ts` |
| 3.2 | –£–±—Ä–∞—Ç—å `any` –∏–∑ epub hooks | 10+ —Ñ–∞–π–ª–æ–≤ |
| 3.3 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å TypeScript –æ—à–∏–±–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö | Mock types |
| 3.4 | –î–æ–±–∞–≤–∏—Ç—å strict mode checks | `tsconfig.json` |

### –§–∞–∑–∞ 4: React patterns fixes (2-3 –¥–Ω—è)

| # | –ó–∞–¥–∞—á–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|--------|----------|
| 4.1 | –£–±—Ä–∞—Ç—å blanket eslint-disable | EpubReader.tsx, etc. |
| 4.2 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å missing dependencies | useEffect hooks |
| 4.3 | –î–æ–±–∞–≤–∏—Ç—å proper cleanup –≤ useEffects | Memory leaks |
| 4.4 | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useCallback –≥–¥–µ –Ω—É–∂–Ω–æ | Performance |

### –§–∞–∑–∞ 5: Backend cleanup (1 –¥–µ–Ω—å)

| # | –ó–∞–¥–∞—á–∞ | –ö–æ–º–∞–Ω–¥–∞/–û–ø–∏—Å–∞–Ω–∏–µ |
|---|--------|------------------|
| 5.1 | Auto-fix ruff issues | `ruff check app/ --fix` |
| 5.2 | –£–¥–∞–ª–∏—Ç—å NLP config | `core/config.py` |
| 5.3 | Migrate Pydantic to V2 | `@validator` ‚Üí `@field_validator` |
| 5.4 | Migrate FastAPI lifespan | `on_event` ‚Üí lifespan |
| 5.5 | –£–¥–∞–ª–∏—Ç—å NLP Docker volumes | `docker-compose.yml` |
| 5.6 | –î–æ–±–∞–≤–∏—Ç—å CASCADE DELETE constraints | –ú–∏–≥—Ä–∞—Ü–∏—è Alembic (—Å–º. —Ä–∞–∑–¥–µ–ª 8.4) |

### –§–∞–∑–∞ 6: Testing improvements (1-2 –¥–Ω—è)

| # | –ó–∞–¥–∞—á–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|--------|----------|
| 6.1 | Register pytest marks | `pytest.ini` –∏–ª–∏ `conftest.py` |
| 6.2 | –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è auth cache clearing | New tests |
| 6.3 | –î–æ–±–∞–≤–∏—Ç—å integration tests –¥–ª—è login/logout flow | New tests |
| 6.4 | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å coverage reports | CI/CD |

---

## 10. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### A. –§–∞–π–ª—ã –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# Critical files requiring immediate attention
frontend/src/stores/auth.ts           # Cache clearing
frontend/src/hooks/api/useDescriptions.ts  # Hook violation
frontend/src/App.tsx                  # Export queryClient
backend/tests/services/nlp/           # Delete entire directory
frontend/package.json                 # Add fake-indexeddb
```

### B. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

```bash
# –§–∞–∑–∞ 1 - –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
cd frontend && npm install -D fake-indexeddb
cd backend && rm -rf tests/services/nlp/
cd backend && rm tests/services/test_*_processor.py
cd backend && rm tests/test_multi_nlp_manager.py
cd backend && ruff check app/ --fix

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
cd backend && python -m pytest tests/ -v --tb=short
cd frontend && npm test
cd frontend && npm run type-check
```

### C. –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|-----|-------|
| **DB migrations** | **‚úÖ Applied** | **‚úÖ OK** |
| **Missing CASCADE DELETE** | **5 FK** | **0** |
| Backend test errors | 29 | 0 |
| Frontend test failures | 7 | 0 |
| TypeScript errors | 34+ | 0 |
| Ruff issues | 50 | 0 |
| eslint-disable directives | 35+ | <10 |
| Cache-related bugs | 1 critical | 0 |

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —Å–æ–ª–∏–¥–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é –æ—Å–Ω–æ–≤—É, –Ω–æ –Ω–∞–∫–æ–ø–∏–ª –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å Multi-NLP —Å–∏—Å—Ç–µ–º—ã.

### –°—Ç–∞—Ç—É—Å –ë–î (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ production):

‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞:**
- –í–µ—Ä—Å–∏—è: `add_is_processing_20251220` (–ø–æ—Å–ª–µ–¥–Ω—è—è)
- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- –í—Å–µ –∫–æ–ª–æ–Ω–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –º–æ–¥–µ–ª—è–º

‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** 5 FK –±–µ–∑ CASCADE DELETE

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **üî¥ CRITICAL (–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ):** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–±–ª–µ–º—É —Å –∫–µ—à–µ–º –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. **HIGH (–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ):** –û—á–∏—Å—Ç–∏—Ç—å orphan –∫–æ–¥ –∏ —Ç–µ—Å—Ç—ã, —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å CI/CD
3. **MEDIUM (–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–æ):** –î–æ–±–∞–≤–∏—Ç—å CASCADE DELETE constraints, —É–ª—É—á—à–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é
4. **LOW (–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ):** –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å state management, —É–±—Ä–∞—Ç—å eslint-disable

### –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:

| –§–∞–∑–∞ | –í—Ä–µ–º—è |
|------|-------|
| –§–∞–∑–∞ 0: ‚úÖ DB OK | –í–´–ü–û–õ–ù–ï–ù–û |
| –§–∞–∑–∞ 1: Critical | 5 —á–∞—Å–æ–≤ |
| –§–∞–∑–∞ 2-6: –û—Å—Ç–∞–ª—å–Ω–æ–µ | ~2 –Ω–µ–¥–µ–ª–∏ |

---

*–û—Ç—á—ë—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω Claude Opus 4.5*
*–í–µ—Ä—Å–∏—è: 1.2 (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ 77.246.106.109)*

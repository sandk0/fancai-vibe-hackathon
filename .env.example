# BookReader AI Environment Variables
#
# IMPORTANT: Never commit this file with real values to git!
# Copy this file to .env for development or .env.production for production
#
# For production: Generate strong random secrets using:
# python -c "import secrets; print(secrets.token_urlsafe(64))"

# =============================================================================
# ENVIRONMENT
# =============================================================================
ENVIRONMENT=development  # development, staging, production
DEBUG=true  # Set to false in production!

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================
DOMAIN_NAME=localhost
DOMAIN_URL=http://localhost
SSL_EMAIL=admin@yourdomain.com

# =============================================================================
# DATABASE SETTINGS
# =============================================================================
# Development defaults (CHANGE IN PRODUCTION!)
DB_NAME=bookreader_dev
DB_USER=postgres
DB_PASSWORD=postgres123  # MUST CHANGE in production!

# Full database URL (constructed from above)
DATABASE_URL=postgresql+asyncpg://${DB_USER}:${DB_PASSWORD}@postgres:5432/${DB_NAME}

# Connection pool configuration (configured in backend/app/core/database.py)
# pool_size=10 (baseline connections)
# max_overflow=20 (burst capacity)
# Total capacity: 30 concurrent database operations

# =============================================================================
# REDIS SETTINGS
# =============================================================================
REDIS_PASSWORD=redis123  # MUST CHANGE in production!
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379

# =============================================================================
# SECURITY SECRETS (CRITICAL - MUST CHANGE IN PRODUCTION!)
# =============================================================================
# Generate using: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=your-super-secret-key-change-in-production-minimum-64-chars
JWT_SECRET_KEY=your-jwt-secret-key-change-in-production-minimum-64-chars

# =============================================================================
# AI SERVICES
# =============================================================================
# OpenAI (optional - for DALL-E image generation)
OPENAI_API_KEY=

# Pollinations.ai (free service)
POLLINATIONS_ENABLED=true

# =============================================================================
# CELERY WORKER CONFIGURATION
# =============================================================================
# Memory optimization settings
CELERY_CONCURRENCY=2  # Tasks per worker
CELERY_MAX_TASKS_PER_CHILD=10  # Restart worker after N tasks
CELERY_WORKER_MAX_MEMORY_PER_CHILD=5000000  # 5GB in KB

# Broker and result backend
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@redis:6379/1
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@redis:6379/2

# =============================================================================
# APPLICATION PERFORMANCE
# =============================================================================
# Uvicorn workers (production)
WORKERS_COUNT=4

# Logging
LOG_LEVEL=info  # debug, info, warning, error, critical

# =============================================================================
# SECURITY & CORS
# =============================================================================
# Allowed CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# Allowed hosts (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1

# =============================================================================
# FRONTEND BUILD VARIABLES
# =============================================================================
VITE_API_URL=http://localhost:8000/api/v1
VITE_WS_URL=ws://localhost:8000
VITE_APP_NAME=BookReader AI

# React app environment variables (must start with REACT_APP_)
REACT_APP_API_URL=http://localhost:8000
REACT_APP_WS_URL=ws://localhost:8000

# =============================================================================
# MONITORING (Optional)
# =============================================================================
# Prometheus metrics
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_ADMIN_PASSWORD=change-this-grafana-password

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=
BACKUP_S3_ACCESS_KEY=
BACKUP_S3_SECRET_KEY=
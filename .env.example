# BookReader AI Environment Variables
#
# ⚠️  IMPORTANT SECURITY NOTICE ⚠️
# - Never commit this file with real values to git!
# - Copy this file to .env.development for development
# - Copy this file to .env.production for production (with strong secrets!)
# - Ensure .env.* files are in .gitignore
#
# Generate strong secrets using:
# python -c "import secrets; print(secrets.token_urlsafe(64))"

# =============================================================================
# ENVIRONMENT
# =============================================================================
ENVIRONMENT=development  # development, staging, production
DEBUG=true  # Set to false in production!

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================
DOMAIN_NAME=localhost
DOMAIN_URL=http://localhost
SSL_EMAIL=admin@yourdomain.com

# =============================================================================
# DATABASE SETTINGS
# =============================================================================
# Development defaults
DB_NAME=bookreader_dev
DB_USER=postgres
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
DB_PASSWORD=REPLACE_WITH_GENERATED_SECRET_MIN_32_CHARS

# Full database URL (constructed from above)
DATABASE_URL=postgresql+asyncpg://${DB_USER}:${DB_PASSWORD}@postgres:5432/${DB_NAME}

# Connection pool configuration (configured in backend/app/core/database.py)
# pool_size=10 (baseline connections)
# max_overflow=20 (burst capacity)
# Total capacity: 30 concurrent database operations

# =============================================================================
# REDIS SETTINGS
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
REDIS_PASSWORD=REPLACE_WITH_GENERATED_SECRET_MIN_32_CHARS
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379

# =============================================================================
# SECURITY SECRETS (CRITICAL!)
# =============================================================================
# Generate using: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=REPLACE_WITH_GENERATED_SECRET_MIN_64_CHARS
JWT_SECRET_KEY=REPLACE_WITH_GENERATED_SECRET_MIN_64_CHARS
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# AI SERVICES
# =============================================================================
# OpenAI (optional - for DALL-E image generation)
OPENAI_API_KEY=

# Pollinations.ai (free service)
POLLINATIONS_ENABLED=true

# =============================================================================
# CELERY WORKER CONFIGURATION
# =============================================================================
# Memory optimization settings
CELERY_CONCURRENCY=2  # Tasks per worker
CELERY_MAX_TASKS_PER_CHILD=10  # Restart worker after N tasks
CELERY_WORKER_MAX_MEMORY_PER_CHILD=5000000  # 5GB in KB

# Broker and result backend
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@redis:6379/1
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@redis:6379/2

# =============================================================================
# APPLICATION PERFORMANCE
# =============================================================================
# Uvicorn workers (production)
WORKERS_COUNT=4

# Logging
LOG_LEVEL=info  # debug, info, warning, error, critical

# =============================================================================
# SECURITY & CORS
# =============================================================================
# Allowed CORS origins (comma-separated)
# Note: Port 5173 is Vite dev server default, 3000 is legacy support
CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173,http://localhost:3000,http://127.0.0.1:3000

# Allowed hosts (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1

# =============================================================================
# FRONTEND BUILD VARIABLES (Vite)
# =============================================================================
# Note: Vite requires VITE_ prefix for environment variables
VITE_API_BASE_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000
VITE_APP_NAME=BookReader AI
VITE_DEBUG=true
VITE_ENVIRONMENT=development

# Legacy React app variables (deprecated - use VITE_ prefix)
# REACT_APP_API_URL=http://localhost:8000
# REACT_APP_WS_URL=ws://localhost:8000

# =============================================================================
# MONITORING (Optional)
# =============================================================================
# Prometheus metrics
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_USER=admin
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(24))"
GRAFANA_PASSWORD=REPLACE_WITH_GENERATED_SECRET_MIN_24_CHARS

# PGAdmin (dev only)
PGADMIN_EMAIL=admin@bookreader.local
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(24))"
PGADMIN_PASSWORD=REPLACE_WITH_GENERATED_SECRET_MIN_24_CHARS

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=
BACKUP_S3_ACCESS_KEY=
BACKUP_S3_SECRET_KEY=
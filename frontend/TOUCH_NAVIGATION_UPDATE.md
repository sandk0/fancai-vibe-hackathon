# Touch Navigation Update - Tap Navigation

## –ò–∑–º–µ–Ω–µ–Ω–∏—è

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ **tap navigation** (–Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –Ω–∞–∂–∞—Ç–∏—é) –≤ EPUB Reader –Ω–∞—Ä–∞–≤–Ω–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π swipe navigation.

### –§–∞–π–ª
`frontend/src/hooks/epub/useTouchNavigation.ts`

---

## –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. Tap Detection (–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–∂–∞—Ç–∏—è)

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
```typescript
const TAP_MAX_DURATION = 200; // ms - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è tap
const TAP_MAX_MOVEMENT = 10;  // px - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –¥–ª—è tap
```

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ –∫–∞—Å–∞–Ω–∏–µ –¥–ª–∏—Ç—Å—è **< 200ms** –ò –¥–≤–∏–∂–µ–Ω–∏–µ –ø–∞–ª—å—Ü–∞ **< 10px** ‚Üí —ç—Ç–æ TAP
- –ò–Ω–∞—á–µ ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è swipe

### 2. Screen Edge Zones (–ó–æ–Ω—ã —ç–∫—Ä–∞–Ω–∞)

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
```typescript
const LEFT_ZONE_END = 0.25;      // 25% –æ—Ç –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è
const RIGHT_ZONE_START = 0.75;   // 75% –æ—Ç –ª–µ–≤–æ–≥–æ (25% –æ—Ç –ø—Ä–∞–≤–æ–≥–æ)
```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- **Tap –≤ –ª–µ–≤—ã—Ö 25%** ‚Üí `prevPage()` - –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- **Tap –≤ –ø—Ä–∞–≤—ã—Ö 25%** ‚Üí `nextPage()` - —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- **Tap –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã—Ö 50%** ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (–∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è UI toggle)

---

## –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

```typescript
handleTouchEnd():
1. –ü–†–ò–û–†–ò–¢–ï–¢ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ TAP
   - –ï—Å–ª–∏ TAP ‚Üí –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–æ–Ω—É ‚Üí –Ω–∞–≤–∏–≥–∞—Ü–∏—è ‚Üí return

2. –ü–†–ò–û–†–ò–¢–ï–¢ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ SWIPE
   - –ï—Å–ª–∏ SWIPE –≤–∞–ª–∏–¥–µ–Ω ‚Üí –Ω–∞–≤–∏–≥–∞—Ü–∏—è
   - –ò–Ω–∞—á–µ ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Tap Navigation
```
User taps at X=50px (–Ω–∞ —ç–∫—Ä–∞–Ω–µ 400px)
‚Üí relativeX = 50/400 = 0.125 (12.5%)
‚Üí 0.125 < 0.25 (–ª–µ–≤–∞—è –∑–æ–Ω–∞)
‚Üí prevPage() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
‚Üí Console: "üëà [useTouchNavigation] Left edge tap detected"
```

### Swipe Navigation (unchanged)
```
User swipes 80px –≤–ª–µ–≤–æ –∑–∞ 250ms
‚Üí –ù–ï tap (–¥–≤–∏–∂–µ–Ω–∏–µ > 10px)
‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ swipe: 80px > 50px (threshold) ‚úÖ
‚Üí –í—Ä–µ–º—è: 250ms < 300ms ‚úÖ
‚Üí nextPage() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
‚Üí Console: "üëâ [useTouchNavigation] Swipe left detected"
```

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ console.log —Å–æ–æ–±—â–µ–Ω–∏—è:

```typescript
"üëà Left edge tap detected, going to previous page"
"üëâ Right edge tap detected, going to next page"
"‚è∏Ô∏è Center tap ignored"
```

–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ swipe –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ swipe –∂–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚úÖ **TypeScript:** –¢–∏–ø–∏–∑–∞—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫
‚úÖ **ESLint:** –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É
‚úÖ **Build:** –£—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞

---

## Testing Checklist

- [ ] Tap –Ω–∞ –ª–µ–≤—ã–π –∫—Ä–∞–π —ç–∫—Ä–∞–Ω–∞ ‚Üí –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- [ ] Tap –Ω–∞ –ø—Ä–∞–≤—ã–π –∫—Ä–∞–π —ç–∫—Ä–∞–Ω–∞ ‚Üí —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- [ ] Tap –≤ —Ü–µ–Ω—Ç—Ä ‚Üí –Ω–∏–∫–∞–∫–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
- [ ] Swipe –≤–ª–µ–≤–æ ‚Üí —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
- [ ] Swipe –≤–ø—Ä–∞–≤–æ ‚Üí –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
- [ ] –î–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (>200ms) ‚Üí –ù–ï —Å—á–∏—Ç–∞–µ—Ç—Å—è tap
- [ ] –î–≤–∏–∂–µ–Ω–∏–µ –ø–∞–ª—å—Ü–∞ (>10px) ‚Üí swipe –≤–º–µ—Å—Ç–æ tap

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **Center tap toggle:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tap –≤ —Ü–µ–Ω—Ç—Ä–µ –¥–ª—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
2. **Configurable zones:** –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –∑–æ–Ω
3. **Visual feedback:** –õ–µ–≥–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ tap –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
4. **Haptic feedback:** –í–∏–±—Ä–∞—Ü–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

---

**–î–∞—Ç–∞:** 2025-12-23
**–í–µ—Ä—Å–∏—è:** 1.0
**–ê–≤—Ç–æ—Ä:** Frontend Developer Agent
